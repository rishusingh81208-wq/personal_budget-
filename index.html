<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Personal Budget Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="topbar">
    <h1>Personal Budget Tracker</h1>
    <div class="top-controls">
      <label class="theme-toggle">
        <input id="theme-toggle" type="checkbox" />
        <span>Dark Mode</span>
      </label>
      <button id="clear-all" class="btn small danger">Clear All</button>
    </div>
  </header>

  <section id="summary" class="summary">
    <div class="card">
      <h3>Total Income</h3>
      <p id="total-income">₹0.00</p>
    </div>
    <div class="card">
      <h3>Total Expense</h3>
      <p id="total-expense">₹0.00</p>
    </div>
    <div class="card">
      <h3>Balance</h3>
      <p id="balance">₹0.00</p>
    </div>
  </section>

  <form id="entry-form" class="entry-form">
    <label>
      Amount
      <input type="number" name="amount" step="0.01" required />
    </label>
    <label>
      Type
      <select name="type" required>
        <option value="">Select</option>
        <option value="Income">Income</option>
        <option value="Expense">Expense</option>
      </select>
    </label>
    <label>
      Category
      <input type="text" name="category" required />
    </label>
    <label>
      Date
      <input type="date" name="date" required />
    </label>
    <label class="notes">
      Notes
      <input type="text" name="notes" />
    </label>
    <button type="submit" class="btn">Add Entry</button>
  </form>

  <div class="controls-row">
    <div class="filters">
      <label>
        Type:
        <select id="filter-type">
          <option value="">All</option>
          <option value="Income">Income</option>
          <option value="Expense">Expense</option>
        </select>
      </label>
      <label>
        Category:
        <input id="filter-category" type="text" placeholder="(e.g. Food)" />
      </label>
      <label>
        Month:
        <select id="filter-month"><option value="">All</option></select>
      </label>
      <label>
        Year:
        <select id="filter-year"><option value="">All</option></select>
      </label>
      <button id="clear-filters" class="btn small">Clear Filters</button>
    </div>

    <div class="advanced-controls">
      <button id="export-csv" class="btn small">Export CSV</button>
      <button id="export-json" class="btn small">Backup JSON</button>
      <label class="btn small file-label">
        Restore JSON
        <input id="restore-file" type="file" accept=".json" />
      </label>
    </div>
  </div>

  <section class="charts">
    <div class="chart-card">
      <h4>Income vs Expense</h4>
      <canvas id="incomeExpenseChart" aria-label="Income vs Expense chart"></canvas>
    </div>
    <div class="chart-card">
      <h4>Category-wise Expense</h4>
      <canvas id="categoryChart" aria-label="Category chart"></canvas>
    </div>
  </section>

  <section class="goals">
    <label>
      Monthly Expense Goal (₹):
      <input id="budget-goal" type="number" min="0" step="0.01" placeholder="e.g., 20000" />
    </label>
    <div class="goal-bar">
      <div id="goal-progress" class="goal-progress"></div>
    </div>
    <p id="goal-text" class="goal-text"></p>
  </section>

  <section class="recurring">
    <h4>Recurring Transactions (Monthly)</h4>
    <form id="recurring-form" class="recurring-form">
      <input id="rec-amount" type="number" step="0.01" placeholder="Amount" required />
      <select id="rec-type" required>
        <option value="Income">Income</option>
        <option value="Expense">Expense</option>
      </select>
      <input id="rec-category" type="text" placeholder="Category" required />
      <input id="rec-day" type="number" min="1" max="28" placeholder="Day (1-28)" required />
      <input id="rec-notes" type="text" placeholder="Notes (optional)" />
      <button type="submit" class="btn small">Add Recurring</button>
    </form>
    <ul id="recurring-list" class="recurring-list"></ul>
  </section>

  <table id="entries-table">
    <thead>
      <tr>
        <th>Amount</th>
        <th>Type</th>
        <th>Category</th>
        <th>Date</th>
        <th>Notes</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="entries-body"></tbody>
  </table>

  <script src="app.js" defer></script>
</body>
</html>
